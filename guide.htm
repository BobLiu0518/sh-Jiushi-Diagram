
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <title>模拟图</title>
    <style type="text/css">
        * {
            padding: 0;
            margin: 0;
            border: 0;
        }

        body {
            width: 100%;
            height: 100%;
            background: #ededf0;
            text-align: center;
            font-size: 16px;
            font-family: "微软雅黑";
            line-height: 1.5;
        }

        .queryBox {
            width: 100%;
            position: relative;
            margin-top: 10px;
            background: #fff;
            border-top: #c8c7cc 1px solid;
            border-bottom: #c8c7cc 1px solid;
        }

        input[name="bus"] {
            margin-left: 0.5em;
            display: block;
            width: 80%;
            height: 2.5em;
            font-size: 1.2em;
        }

        input[name="icon"] {
            position: absolute;
            z-index: 1;
            font-size: 1.2em;
            width: 2.5em;
            height: 2.5em;
            top: 0;
            right: 0;
            background: url(images/bs.png) no-repeat center center;
            background-size: 50% 50%;
        }

        input:focus {
            outline: none;
        }

        .error {
            color: #f00;
        }

        .error, .taps {
            margin: 15px 0.5em 0;
            text-align: left;
        }

        .error {
            display: none;
        }

        .taps p {
            position: relative;
            text-align: left;
            font-size: 0.9em;
            color: #535353;
            padding-left: 20px;
            word-break: break-all;
        }

            .taps p span {
                position: absolute;
                z-index: 10;
                left: 0;
                top: 0;
            }

        ul#xc li {
            padding-left: 0.5em;
            display: block;
            height: 2.5em;
            font-size: 1.1em;
            line-height: 2.5em;
            border-bottom: #c8c7cc 1px solid;
        }

            ul#xc li:hover {
                background: #ccc;
            }

        ul#xc {
            width: 100%;
            background: #fff;
            z-index: 1000;
        }

        img.bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            display: block;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="css/loading.css">
    <link href="css/loading.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">

        function onBridgeReady() {
            WeixinJSBridge.call('hideOptionMenu');
        }

        $(function () {

            if (typeof WeixinJSBridge == "undefined") {
                if (document.addEventListener) {
                    document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
                } else if (document.attachEvent) {
                    document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
                    document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
                }
            } else {
                onBridgeReady();
            }

        });

        function showalert(param) {
            //alert("aaaaa");
            var key = param;
            var ih = $('#xc').html();
            var data = ["浦西滨江1路",
                "南东专线",
                "南堡二线",
                "南建专线",
                "南江专线",
                "101",
                "1205",
                "1227",
                "1250",
                "129",
                "178",
                "178大站车",
                "180",
                "218",
                "04",
                "1603",
                "奉卫线",
                "松新枫线",
                "申崇六线",
                "徐闵线",
                "闵行1路",
                "329",
                "47",
                "538",
                "55",
                "26",
                "301",
                "318",
                "324",
                "627",
                "630",
                "632",
                "736",
                "867",
                "950",
                "北安跨线",
                "虹桥枢纽1路",
                "932",
                "大桥一线",
                "徐川专线",
                "隧道八线",
                "隧道夜宵一线",
                "堡胜专线",
                "崇明乡村6路",
                "崇明乡村7路",
                "崇明乡村8路",
                "803",
                "808",
                "836",
                "725",
                "759",
                "340",
                "45",
                "739",
                "741",
                "762",
                "817",
                "833",
                "849",
                "862",
                "952B",
                "1226",
                "179",
                "220",
                "61",
                "66区间",
                "870",
                "874",
                "99",
                "185",
                "302",
                "305",
                "46区间",
                "528",
                "58",
                "702",
                "728",
                "宝山4路",
                "宝山84路",
                "宝山92路",
                "金枫线",
                "南隆专线",
                "158",
                "1210",
                "192",
                "205",
                "151",
                "枫泾七路",
                "申崇一线",
                "申崇三线",
                "长兴1路",
                "100",
                "102",
                "763",
                "810",
                "146",
                "17",
                "609",
                "734",
                "87",
                "93",
                "941",
                "941跨线定班",
                "944",
                "948",
                "新泾1路",
                "长征1路",
                "974",
                "975",
                "堡四线",
                "堡红线",
                "崇明东滩2路",
                "崇明乡村5路",
                "748",
                "830",
                "50",
                "50区间",
                "747",
                "252",
                "323",
                "48",
                "519",
                "71",
                "72",
                "737",
                "767",
                "845",
                "952",
                "1201",
                "1228",
                "13",
                "135",
                "137",
                "142",
                "195",
                "28",
                "97",
                "1610",
                "1612",
                "172",
                "206",
                "332",
                "554",
                "722",
                "宝山22路",
                "宝山3路",
                "宝山88路",
                "宝山9路",
                "金山2路",
                "金山7路",
                "金山8路",
                "南同专线",
                "南裕专线",
                "01",
                "105",
                "112区间",
                "1231",
                "109",
                "1204B",
                "122",
                "326",
                "118",
                "1208",
                "1600",
                "1607",
                "张堰一路",
                "松卫专线",
                "漕泾一路",
                "申崇六线B",
                "申崇四线",
                "长兴3路",
                "89",
                "92B",
                "江川3路",
                "莘庄2路",
                "闵行22路",
                "406",
                "59",
                "597",
                "11",
                "18",
                "624",
                "805",
                "88",
                "94",
                "上嘉线",
                "松江12路",
                "闵行36路",
                "陆安高速",
                "陆安高速B",
                "合庆2路",
                "浦东15路",
                "浦东17路",
                "堡陈北线",
                "崇明乡村9路",
                "743",
                "753",
                "765",
                "776",
                "827",
                "837",
                "704B",
                "714",
                "720",
                "729",
                "732",
                "21",
                "319",
                "78",
                "821",
                "95",
                "962",
                "1218",
                "140",
                "155",
                "6",
                "66",
                "723",
                "746",
                "819",
                "842",
                "大桥三线",
                "312",
                "321",
                "508",
                "510",
                "527",
                "宝山35路",
                "宝山6路",
                "宝山7路",
                "宝山82路",
                "宝山89路",
                "宝山90路",
                "申崇五线",
                "罗泾班线",
                "金山1路",
                "南堡支线",
                "南新专线",
                "南海线",
                "南跃线",
                "113",
                "1221",
                "136",
                "173",
                "1202",
                "143",
                "166",
                "342",
                "49",
                "108",
                "110",
                "160",
                "1609",
                "南金线",
                "朱卫专线",
                "朱泾五路区间",
                "枫梅线",
                "石南专线",
                "横长线",
                "申崇二线区间",
                "长兴2路",
                "长南线",
                "103",
                "770",
                "古美环线",
                "徐闵夜宵专线",
                "松闵线",
                "莘庄1路",
                "闵行29路",
                "33",
                "628",
                "733",
                "855",
                "856",
                "859",
                "北安线",
                "松亭石专线",
                "闵行28路",
                "929",
                "931",
                "933",
                "高川专线",
                "堡七线",
                "堡陈中线",
                "崇明东滩1路",
                "崇明乡村3路",
                "崇明乡村4路",
                "744",
                "76",
                "804",
                "809",
                "825",
                "826",
                "700",
                "708",
                "712",
                "731",
                "224",
                "311",
                "44",
                "548",
                "63",
                "67",
                "69",
                "811",
                "812",
                "839",
                "850",
                "853",
                "937",
                "123",
                "139",
                "19",
                "20",
                "22",
                "222",
                "716",
                "758",
                "854",
                "966",
                "711",
                "宝山19路",
                "宝山1路",
                "宝山93路",
                "石漕线",
                "金山卫一路",
                "金山卫二路",
                "金山工业区一路",
                "金山工业区二路",
                "1711",
                "1712",
                "1721",
                "南堡专线",
                "117",
                "141",
                "193",
                "197",
                "152",
                "162",
                "171",
                "189",
                "198",
                "43",
                "116B",
                "1209",
                "1606",
                "塘卫线",
                "山阳一路",
                "朱泾五路",
                "松卫线",
                "申崇三线区间",
                "申崇二线",
                "115",
                "764",
                "820",
                "92",
                "虹桥枢纽4路",
                "闵行16路",
                "308",
                "317",
                "325",
                "1220",
                "42",
                "615",
                "730",
                "866",
                "上佘定班线",
                "沪松专线",
                "926",
                "倡导文明乘车",
                "外高桥2路",
                "浦东13路",
                "崇明乡村11路",
                "74",
                "56",
                "703B",
                "707",
                "36",
                "54",
                "717",
                "721",
                "738",
                "832",
                "834",
                "877",
                "879",
                "98",
                "宝山13路",
                "宝山14路",
                "宝山15路",
                "宝山16路",
                "168",
                "25",
                "749",
                "8",
                "876",
                "960",
                "187",
                "322",
                "51",
                "726",
                "727",
                "宝山21路",
                "宝山25路",
                "宝山28路",
                "宝山36路",
                "申崇五线班车",
                "金山3路",
                "金山5路",
                "金山6路",
                "南风线",
                "106",
                "112",
                "120",
                "1206",
                "121",
                "149",
                "176",
                "143区间",
                "144",
                "150",
                "157",
                "189区间",
                "303",
                "108区间",
                "159",
                "1601",
                "1604",
                "1650",
                "朱卫线",
                "朱钱卫线",
                "枫戚快线",
                "石化三线",
                "申崇四线区间",
                "陈凤线",
                "陈前线",
                "761",
                "958",
                "闵东线",
                "闵马线",
                "307",
                "315",
                "37",
                "522",
                "184",
                "607",
                "715",
                "818",
                "909",
                "91",
                "946",
                "947",
                "911",
                "927",
                "万周专线",
                "隧道二线",
                "768",
                "828",
                "56区间",
                "704",
                "320",
                "709",
                "813",
                "841",
                "963",
                "宝山10路",
                "124",
                "14",
                "15",
                "751",
                "80",
                "868",
                "90",
                "1611",
                "46",
                "52",
                "537",
                "547",
                "705",
                "719",
                "宝山27路",
                "宝山29路",
                "宝山30路",
                "宝山85路",
                "宝山8路",
                "金石线",
                "南海二线",
                "南牛线",
                "城桥1路",
                "1207",
                "1217",
                "111",
                "257",
                "133",
                "1602",
                "1605",
                "1651",
                "山阳一路区间",
                "山阳二路",
                "张堰二路",
                "朱松线",
                "浦卫线",
                "石化一线",
                "长兴4路",
                "831",
                "莘庄3路",
                "莘车线",
                "闵吴线",
                "闵行30路",
                "闵行33路",
                "304",
                "330",
                "405",
                "559",
                "1212",
                "41",
                "64",
                "824",
                "923",
                "920",
                "973",
                "上川专线",
                "塘南专线",
                "孙桥1路",
                "浦东11路",
                "浦东14路",
                "堡陈专线",
                "崇明乡村10路",
                "742",
                "750",
                "766",
                "838",
                "846",
                "703",
                "718",
                "735",
                "216",
                "316",
                "327",
                "341",
                "57",
                "71区间",
                "745",
                "823",
                "912",
                "959",
                "宝山11路",
                "宝山17路",
                "宝山18路",
                "1219",
                "134",
                "145",
                "147",
                "24",
                "60",
                "70",
                "79",
                "875",
                "165",
                "210",
                "253",
                "40",
                "552",
                "65",
                "713",
                "宝山31路",
                "宝山5路",
                "宝山87路",
                "宝山91路",
                "申方专线",
                "石梅线",
                "石胡专线",
                "虹桥枢纽7路",
                "金漕线",
                "1731",
                "南红专线",
                "城桥2路",
                "1223",
                "1251",
                "190",
                "1203",
                "1204",
                "131",
                "107",
                "132",
                "1608",
                "上石线",
                "亭林三路",
                "南卫线",
                "山阳二路工业区",
                "浦卫专线",
                "横沙2路",
                "横沙3路",
                "864",
                "306",
                "310",
                "577",
                "1014",
                "104",
                "1084",
                "1216",
                "1222",
                "138",
                "629",
                "869",
                "858",
                "沪唐专线",
                "930",
                "96",
                "打造精品公交",
                "树立标杆线路",
                "申川专线",
                "堡进线",
                "崇明乡村1路",
                "740",
                "754",
                "757",
                "807",
                "829",
                "755",
                "309",
                "328",
                "561",
                "62",
                "724",
                "760",
                "878",
                "951",
                "宝山12路",
                "1229",
                "1238",
                "123区间",
                "23",
                "934",
                "939",
                "942",
                "502",
                "551",
                "68",
                "701",
                "宝山20路",
                "宝山23路",
                "宝山2路",
                "宝山81路",
                "宝山83路",
                "宝山86路",
                "宝山95路",
                "石青专线",
                "莘金专线",
                "金山4路",
                "金山9路",
                "金山9路区间",
                "金张卫支线",
                "青枫专线"
            ];
            if (key != '') {
                //这里给个全数据

                xt = check(data, key);
                //alert(xt);
                $('#xc').html('');
                $('#xc').append(xt);
                $('#xc').css('display', 'block');
            } else {
                $('#xc').html('');
            }
        }

        function check(data, key) {
            var out = '';
            var temp = new Array();
            for (var i = 0; i < data.length; i++) {
                var s = data[i].indexOf(key);
                if (s == 0 && data[i] != key) {
                    temp.push(data[i]);
                }
            }


            temp.sort(function (a, b) {
                var fa = a.replace(/[^0-9]/ig, "");
                var fb = b.replace(/[^0-9]/ig, "");

                var ta = parseInt(fa);
                var tb = parseInt(fb);

                return ta - tb;
            });
            for (var ii = 0; ii < temp.length; ii++) {
                out += "<li onClick=\"javascript:change('" + temp[ii] + "')\">" + temp[ii] + "</li>";
            }
            return out;
        }

        function change(val) {
            $('#bus').val(val);
            $('#xc').html('');
            $('#check').click();
        }
        $(function () {

            $('#check').click(function () {
                var line = $("#bus").val();
                if (line == "") {
                    $("#error").html("请选择线路");
                    $('#error').show();
                    return;
                }
                $("#mask,#loader").show();
                var urlx = "index.htm?roadline=" + escape(line);
                location.href = urlx;

            });
        })

        function urlencode(str) {
            str = (str + '').toString();

            return encodeURIComponent(str).replace(/!/g, '%21').replace(/'/g, '%27').replace(/\(/g, '%28').
                replace(/\)/g, '%29').replace(/\*/g, '%2A').replace(/%20/g, '+');
        }

        //===base64 start====
        var base64EncodeChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
        var base64DecodeChars = new Array(-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1);
        /**
        * base64编码
        * @param {Object} str
        */
        function base64encode(str) {
            var out, i, len;
            var c1, c2, c3;
            len = str.length;
            i = 0;
            out = "";
            while (i < len) {
                c1 = str.charCodeAt(i++) & 0xff;
                if (i == len) {
                    out += base64EncodeChars.charAt(c1 >> 2);
                    out += base64EncodeChars.charAt((c1 & 0x3) << 4);
                    out += "==";
                    break;
                }
                c2 = str.charCodeAt(i++);
                if (i == len) {
                    out += base64EncodeChars.charAt(c1 >> 2);
                    out += base64EncodeChars.charAt(((c1 & 0x3) << 4) | ((c2 & 0xF0) >> 4));
                    out += base64EncodeChars.charAt((c2 & 0xF) << 2);
                    out += "=";
                    break;
                }
                c3 = str.charCodeAt(i++);
                out += base64EncodeChars.charAt(c1 >> 2);
                out += base64EncodeChars.charAt(((c1 & 0x3) << 4) | ((c2 & 0xF0) >> 4));
                out += base64EncodeChars.charAt(((c2 & 0xF) << 2) | ((c3 & 0xC0) >> 6));
                out += base64EncodeChars.charAt(c3 & 0x3F);
            }
            return out;
        }
        /**
        * base64解码
        * @param {Object} str
        */
        function base64decode(str) {
            var c1, c2, c3, c4;
            var i, len, out;
            len = str.length;
            i = 0;
            out = "";
            while (i < len) {
                /* c1 */
                do {
                    c1 = base64DecodeChars[str.charCodeAt(i++) & 0xff];
                }
                while (i < len && c1 == -1);
                if (c1 == -1)
                    break;
                /* c2 */
                do {
                    c2 = base64DecodeChars[str.charCodeAt(i++) & 0xff];
                }
                while (i < len && c2 == -1);
                if (c2 == -1)
                    break;
                out += String.fromCharCode((c1 << 2) | ((c2 & 0x30) >> 4));
                /* c3 */
                do {
                    c3 = str.charCodeAt(i++) & 0xff;
                    if (c3 == 61)
                        return out;
                    c3 = base64DecodeChars[c3];
                }
                while (i < len && c3 == -1);
                if (c3 == -1)
                    break;
                out += String.fromCharCode(((c2 & 0XF) << 4) | ((c3 & 0x3C) >> 2));
                /* c4 */
                do {
                    c4 = str.charCodeAt(i++) & 0xff;
                    if (c4 == 61)
                        return out;
                    c4 = base64DecodeChars[c4];
                }
                while (i < len && c4 == -1);
                if (c4 == -1)
                    break;
                out += String.fromCharCode(((c3 & 0x03) << 6) | c4);
            }
            return out;
        }
        /**
        * utf16转utf8
        * @param {Object} str
        */
        function utf16to8(str) {
            var out, i, len, c;
            out = "";
            len = str.length;
            for (i = 0; i < len; i++) {
                c = str.charCodeAt(i);
                if ((c >= 0x0001) && (c <= 0x007F)) {
                    out += str.charAt(i);
                }
                else
                    if (c > 0x07FF) {
                        out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));
                        out += String.fromCharCode(0x80 | ((c >> 6) & 0x3F));
                        out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F));
                    }
                    else {
                        out += String.fromCharCode(0xC0 | ((c >> 6) & 0x1F));
                        out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F));
                    }
            }
            return out;
        }
        /**
        * utf8转utf16
        * @param {Object} str
        */
        function utf8to16(str) {
            var out, i, len, c;
            var char2, char3;
            out = "";
            len = str.length;
            i = 0;
            while (i < len) {
                c = str.charCodeAt(i++);
                switch (c >> 4) {
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                        // 0xxxxxxx
                        out += str.charAt(i - 1);
                        break;
                    case 12:
                    case 13:
                        // 110x xxxx 10xx xxxx
                        char2 = str.charCodeAt(i++);
                        out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));
                        break;
                    case 14:
                        // 1110 xxxx10xx xxxx10xx xxxx
                        char2 = str.charCodeAt(i++);
                        char3 = str.charCodeAt(i++);
                        out += String.fromCharCode(((c & 0x0F) << 12) | ((char2 & 0x3F) << 6) | ((char3 & 0x3F) << 0));
                        break;
                }
            }
            return out;
        }
        //demo
        //function doit(){
        //    var f = document.f;
        //    f.output.value = base64encode(utf16to8(f.source.value));
        //    f.decode.value = utf8to16(base64decode(f.output.value));
        //}

        //===base64 end =====
    </script>
</head>
<body>
    <div>
        <article>
            <div class="queryBox">
                <input type="text" autocomplete="off" id="bus" placeholder="请输入线路名称" value="" name="bus"
                       oninput="showalert(this.value)" />
                <input type="submit" id="check" value="" name="icon" />
            </div>
            <div style="text-align: left; position: relative; z-index: 100; width: 100%;">
                <ul id="xc">
                </ul>
            </div>
            <div class="error" id="error">
            </div>
            <div class="taps">
                <p>
                    <span>1、</span>请输入完整的久事公交的线路名称，如“933”、“46区间”
                </p>
 
                <p>
                    <span>2、</span>您所看到的久事模拟图为本站自建版本。<a href="https://github.com/sjlleo/sh-Jiushi-Diagram">Made by sjlleo</a>
                </p>
            </div>
        </article>
        <div id="mask">
        </div>
        <div id="loader">
            <div id="fountainG">
                <div id="fountainG_1" class="fountainG">
                </div>
                <div id="fountainG_2" class="fountainG">
                </div>
                <div id="fountainG_3" class="fountainG">
                </div>
                <div id="fountainG_4" class="fountainG">
                </div>
                <div id="fountainG_5" class="fountainG">
                </div>
                <div id="fountainG_6" class="fountainG">
                </div>
                <div id="fountainG_7" class="fountainG">
                </div>
                <div id="fountainG_8" class="fountainG">
                </div>
            </div>
        </div>
    </div>
</body>
</html>
